<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Push Notifications</title>
    <!-- Firebase SDKs -->
   
</head>
<body>
    <h1>Push Notifications</h1>
   <button id="enableNotifications">Enable Notifications</button>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const enableNotificationsButton = document.getElementById('enableNotifications');

        enableNotificationsButton.addEventListener('click', () => {
            console.log('Button clicked! Requesting permission for notifications...');
            // Assuming Firebase has already been initialized
            messaging.requestPermission()
                .then(() => messaging.getToken())
                .then((token) => {
                    console.log('FCM Token:', token);
                    alert('Notifications enabled! Your token: ' + token);
                })
                .catch((err) => {
                    console.error('Permission denied or error occurred:', err);
                    alert('Notifications permission denied!');
                });
        });
    });
</script>

    <script>
        if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/notify/firebase-messaging-sw.js')
        .then(registration => {
            console.log('Service Worker registered with scope:', registration.scope);
        })
        .catch(err => {
            console.error('Service Worker registration failed:', err);
        });
}
    </script>
</body>
</html>
